# 리눅스 명령어
> top (table of processes)

cpu 사용량,메모리 사용량 등에 관한 정보를 실시간으로 출력하는 명령어이다.
또한 실시간으로 현재 os의 상태를 출력해줌으로써 os문제가 있을시 원인을 찾을수 있는 명령어 중 하나이다.

* top -d(delay) 숫자 : top 명령을 입력하면 3초마다 정보가 갱신되어 최신정보를 보여주는데 이 주기를 초 단위로 설정 가능하다
* top -b : 배치모드로 정보를 출력,실시간 상황 대화형모드로 정보를 화면에 일렬로 출력한다.
* top -i(idle) : 토클값이 off일때, idle 프로세스나 좀비 프로세스 정보를 출력하지 않습니다.
* top -n(num) : 지정한 시간(num)만큼 업데이트 정보를 출력한다.
* top -p(pid) : 지정한 프로세스 ID(pid)의 정보만을 출력한다.
* top -q : 시간의 간격 없이 계속하여 업데이트 정보를 출력한다.
* top -s : 몇개의 대화식 명령을 비활성화 합니다.
* top -S : 누적된 정보를 출력한다.

top 실행 후 단축키 명령어
|명령어|설명|
|:--:|:--:|
|space|정보를 업데이트함|
|shift+p|cpu사용량이 높은 프로세스 순서대로 표시|
|shift+m|메모리 사용률이 높은 프로세스 순서대로 표시|
|shift+t|프로세스가 돌아가고 있는 시간 순서대로 표시|
|k|프로세스를 종료시킨다|
|a|메모리 사용량에 따라 정렬|
|b|batch 모드|
|c|명령행,프로그램 이름 토글|
|h|도움말|
|n 또는 #|출력할 프로세스의 수를 지정|
|s|출력할 정보의 업데이트의 시간을 지정|
|q|top를 종료한다|

> ps (process status)

현재 실행중인 프로세스 목록과 상태를 보여주는 명령어이다.(윈도우의 작업 관리자와 비슷한 역할)

프로세스:실행중인 프로그램

* ps -e : 현재 사용자뿐만 아니라 다른 사용자들이 구동시킨 모든 프로세스를 보여준다 (즉  -e 옵션이 없다면 ps명령어는 현재 사용자(shell)이 실행중인 프로세스만 보여준다.)
* ps -f : 보다 상세한 정보를 보여준다. (full format)
* ps -l : -f보다 더 상세한 정보를 보여준다. (long format)
* ps -ef : 모든 프로세스를 풀 포맷으로 출력
* ps -ef | grep '프로세스명':'프로세스명'의 프로세스 구동 확인
> ex) $ps -ef | grep mysqid = 모든 프로세스 중에 myspid를 풀 포맷으로 출력
* ps aux : 실행중인 모든 프로세스 확인
* ps auxf : 실행중인 프로세스를 트리 구조로 출력
* ps auxfww : 실행중인 프로세스를 트리구조 + 모든 실행중인 옵션 확인 가능
* ps ax : 시스템의 모든 프로세스를 BSD 포맷으로 

> ps 명령어를 통해 출력되는 결과의 각 필드의 의미

F : 프로세스 플래그
* 4:used super-user privileges
* 1:forked but didn't exec
* 5: 4&1 플래그에 모두 해당하는 경우
* 0:어떤 플래그에도 해당하지 않는 경우
S : 프로세스의 현재 상태
* R:실행 중 혹은 실행될 수 있는 상태
* S:대기 상태 (약20초 이상)
* I:대기 상태 (약20초 이하)
* T:작업 제어에 의해 정지된 상태
* D:디스크 관련 대기 상태
* P:페이지 관련 대기 상태
* X:메모리 확보를 위한 대기 상태
* >:인위적으로 우선 순위가 높아진 상태
* Z:좀비 프로세스
UID :프로세스를 실행시킨 사용자 ID
PID :프로세스에 부여된 ID
PPID :프로세스의 부모 프로세스 ID (parent process ID)
C :CPU 사용량(%)
PRI :프로세스 우선순위
NI :프로세스의 CPU 자원 사용 우선순위(Nice)
ADDR :프로세스의 메모리 주소
SZ :가상 메모리 사용량
STIME :프로세스 시작 시간
TTY :프로세스가 실행된 터미널의 종류와 번호
TIME :프로세스에 의해 사용된 CPU 시간
CMD :실행된 프로세스의 이름 혹은 실행된 명령

> jobs

백그라운드로 실행되는 작업목록(작업번호,상태,명령어)를 보여주는 명령어
여기서 작업번호는 PID와 달리,별도로 부여되는 백그라운드 작업목록 상의 번호이다
작업목록은 현재 쉘 세션에 딸린 것이며, 다른 세션과는 독립적이다
현재 쉘 프로세스(bash)의 자식 백그라운드 프로세스들을 보여준다고 할수있다
리눅스 kill 명령어 뒤에 '%번호'를 입력하여 종료시킬 수 

* jobs (옵션) (job ID) 또는 jobs -x command (args)
* jobs -l : 프로세스 그룹 ID를 state 필드 앞에 출력,백그라운드에 있는 프로세스의 프로세스 아이디(PID)를 함께 출력한다
* jobs -n : 프로세스 그룹 중에 대표 프로세스 ID를 출력
* jobs -p : 각 프로세스 ID에 대해 한 행씩 출력,백그라운드에 있는 프로세스의 프로세스 아이디(PID)만 출력한다
* jobs command : 지정한 명령어를 실행

> jobs로 알수 있는 세션의 상태 값

|상태|설명|
|:--:|:--:|
|running|작업이 일시 중단되지 않았고 종료하지 않고 계속 진행 중임|
|done|작업이 완료되어 0을 반환하고 종료 했음을 의미|
|done(code)|작업이 정상적으로 완료되었으며,0이 아닌 코드를 반환 했음을 의미|
|stopped|작업이 일시 중단|
|stopped(SIGTSTP)|SIGTSTP 신호가 작업을 일시 중단|
|stopped(SIGSTOP)|SIGSTOP 신호가 작업을 일시 중단|
|stopped(SIGTTIN)|SIGTTIN 신호가 작업을 일시 중단|
|stopped(SIGTTOU)|SIGTTOU 신호가 작업을 일시 중단|

> kill

프로세스에 특정한 시그널을 보내는 명령어
일반적으로 종료되지 않는 프로세스를 종료시킬 때 많이 사용한다
시그널은 여러 종류가 있고, 각기 번호가 붙어있다

* kill-l : 사용할수 있는 모든 시그널 번호 확인 가능
* kill-9 [PID] : 프로세스아이디(PID)를 직접 지정하여 종료시 사용
* kill (옵션 또는 시그널(번호 또는 이름)) PID
> ex) $kill -9 1234, $kill -SIGKILL 1234

|번호|신호이름|신호|의미|
|:--:|:--:|:--:|:--:|
|1|SIGHUP|HUP|hangup,로그아웃등의 접속이 끊을때 발생하는 신호로 특정 실행중인 프로그램이 사용하는 설정 파일을 변경시키고 변화된 내용을 적용시킬때 사용됩니다|
|2|SIGINT|INT|현재 작동중인 프로그램의 동작을 멈출떄 사용되어,일반적인 값은 <CTRL>+<C>입니다|
|9|SIGKILL|KILL|프로그램을 무조건 종료할 경우 사용됩니다|
|11|SIGSEGV|SEGV|잘못된 메모리 관리시 생기는 신호입니다|
|15|SIGTERM|TERM|실행중인 프로그램을 정상적인 종료방법으로 프로그램을 종료하는 신호로 kill명령에서 신호를 지정하지 않으면 이 신호를 사용하여 프로그램을 종료한다|
|18|SIGCONT|CONT|중지 되어 있는 프로그램을 재실행하는데 시용되는 신호|
|19|SIGSTOP|STOP|프로그램을 중지하는데 사용되는 신호입니다|
|20|SIGTSTP|TSTP|터미널에서 중지되어 있는 신호입니다|

